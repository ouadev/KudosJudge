#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <signal.h>
#include <errno.h>

int fact(int u){
	if(u==1) return 1;
	return u*fact(u-1);
}

int stackoverflow(){
	char x[100];
	stackoverflow();
}

void alarm_handle(int sig){
	printf("alarm ....\n");
	alarm(1);
}

int main(int argc,char*argv[]){

	//system("wget -O /tmp/index.html http://hespress.com");
	FILE* tmp=fopen("/tmp/malware.out","w+");
	if(tmp==NULL){
		printf("cannot create tmp file\n");return 5;
	}
	fputs("ouadim malware\ndetails..",tmp);
	fclose(tmp);
	tmp=fopen("/tmp/malware.out","r");
	char  buf[400];
	fgets(buf,400,tmp);
	printf("\n\n%s\n\n",buf);
	fclose(tmp);

	signal(SIGALRM,alarm_handle);
	alarm(1);
	sleep(2);
//	pid_t pid=fork();
//	if(pid==0) printf("i'm the child\n");
//	else if(pid>0) printf("i'm the father, my child:%d\n",pid);
//	else printf("error forking\n");



	return 0;
}

